<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÛ•Ù…ÛŒ Ø¯Ø§Ø®ÚµÚ©Ø±Ø¯Ù†ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <style>
        :root {
            --primary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f1c40f;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            color: var(--dark);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        h2 { text-align: center; margin-bottom: 30px; color: var(--dark); border-bottom: 3px solid var(--primary); padding-bottom: 10px; }

        .form-group {
            margin-bottom: 20px;
        }

        label { display: block; margin-bottom: 8px; font-weight: bold; color: #555; }

        input, select {
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
            width: 100%;
            box-sizing: border-box;
            background: #f9f9f9;
        }

        input:focus, select:focus { border-color: var(--primary); background: white; }

        .button-bar {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 15px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            transition: 0.3s;
            font-size: 16px;
        }

        .btn-save { background-color: var(--success); grid-column: span 2; }
        .btn-clear { background-color: #95a5a6; }
        .btn-search { background-color: var(--primary); }

        button:hover { opacity: 0.9; transform: translateY(-2px); }
        button:active { transform: translateY(0); }

    </style>
</head>
<body>

<div class="container">
    <h2>Ø¯Ø§Ø®ÚµÚ©Ø±Ø¯Ù†ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„</h2>
    
    <div class="form-group">
        <label>Ú˜Ù…Ø§Ø±Û•ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„:</label>
        <input type="text" id="carNumber" placeholder="Ù†Ù…ÙˆÙ†Û•: 12345 Ù‡Ù€">
    </div>

    <div class="form-group">
        <label>Ù‡ÛÚµ (Ù…Ø³Ø§Ø±):</label>
        <select id="carLine">
            <option value="" disabled selected>Ù‡ÛÚµÛ•Ú©Û• Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•</option>
            <option value="Ù‡Û•ÙˆÙ„ÛØ±">Ù‡Û•ÙˆÙ„ÛØ±</option>
            <option value="Ú©Û•Ø±Ú©ÙˆÚ©">Ú©Û•Ø±Ú©ÙˆÚ©</option>
            <option value="Ú•Ø§Ù†ÛŒÛ•">Ú•Ø§Ù†ÛŒÛ•</option>
            <option value="Ù‚Û•ÚµØ§Ø¯Ø²Û">Ù‚Û•ÚµØ§Ø¯Ø²Û</option>
            <option value="Ø¨ØºØ¯Ø§Ø¯">Ø¨ØºØ¯Ø§Ø¯</option>
            <option value="Ú†Û•Ù…Ú†Û•Ù…Ø§Úµ">Ú†Û•Ù…Ú†Û•Ù…Ø§Úµ</option>
            <option value="Ø¯ÙˆÙˆØ²">Ø¯ÙˆÙˆØ²</option>
            <option value="Ú©Û†ÛŒÛ•">Ú©Û†ÛŒÛ•</option>
        </select>
    </div>

    <div class="form-group">
        <label>Ù†Ø±Ø®ÛŒ ÙˆÛ•Ø³Úµ:</label>
        <select id="carPrice">
            <option value="" disabled selected>Ù†Ø±Ø® Ø¯ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•</option>
            <option value="1000">1000</option>
            <option value="2000">2000</option>
            <option value="3000">3000</option>
            <option value="4000">4000</option>
            <option value="5000">5000</option>
            <option value="6000">6000</option>
            <option value="6500">6500</option>
            <option value="10000">10000</option>
            <option value="15000">15000</option>
        </select>
    </div>

    <div class="form-group">
        <label>Ø¬Û†Ø±ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„:</label>
        <select id="carType">
            <option value="" disabled selected>Ø¬Û†Ø±Û•Ú©Û• Ø¯ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•</option>
            <option value="ØªÛ•Ú©Ø³ÛŒ">ØªÛ•Ú©Ø³ÛŒ</option>
            <option value="Ù¾Ø§Ø³">Ù¾Ø§Ø³</option>
        </select>
    </div>

    <div class="button-bar">
        <button class="btn-save" onclick="saveData()">ğŸ’¾ Ø®Û•Ø²Ù†Ú©Ø±Ø¯Ù†ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ</button>
        <button class="btn-search" onclick="searchCar()">ğŸ” Ú¯Û•Ú•Ø§Ù†</button>
        <button class="btn-clear" onclick="clearInputs()">âœ¨ Ù¾Ø§Ú©Ú©Ø±Ø¯Ù†Û•ÙˆÛ•</button>
    </div>
</div>

<script>
    // --- Firebase Configuration ---
    const firebaseConfig = {
        apiKey: "AIzaSyCuUstd-6d0E-EbmQipv2mWk-bA55ajpQ0",
        authDomain: "car-system-4594d.firebaseapp.com",
        projectId: "car-system-4594d",
        storageBucket: "car-system-4594d.firebasestorage.app",
        messagingSenderId: "719030469585",
        appId: "1:719030469585:web:7a23645b9e684b727dd6f0"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Ù¡. Ø®Û•Ø²Ù† Ú©Ø±Ø¯Ù† Ø¨Û• Ù¾Ø´Ú©Ù†ÛŒÙ†ÛŒ Ø¯ÙˆÙˆØ¨Ø§Ø±Û• Ù†Û•Ø¨ÙˆÙˆÙ†Û•ÙˆÛ•
    async function saveData() {
        const num = document.getElementById('carNumber').value.trim();
        const line = document.getElementById('carLine').value;
        const price = document.getElementById('carPrice').value;
        const type = document.getElementById('carType').value;

        if(!num || !line || !price || !type) return alert("ØªÚ©Ø§ÛŒÛ• Ù‡Û•Ù…ÙˆÙˆ Ø®Ø§Ù†Û•Ú©Ø§Ù† Ù¾Ú• Ø¨Ú©Û•Ø±Û•ÙˆÛ•");

        try {
            // Ù¾Ø´Ú©Ù†ÛŒÙ†: Ø¦Ø§ÛŒØ§ Ø¦Û•Ù… Ú˜Ù…Ø§Ø±Û•ÛŒÛ• Ù¾ÛØ´ØªØ± Ù„Û•Ù… Ù‡ÛÚµÛ•Ø¯Ø§ Ù‡Û•Ø¨ÙˆÙˆÛ•ØŸ
            const duplicateCheck = await db.collection("Cars")
                .where("number", "==", num)
                .where("line", "==", line)
                .get();

            if (!duplicateCheck.empty) {
                return alert("âš ï¸ Ø¦Ø§Ú¯Ø§Ø¯Ø§Ø±ÛŒ: Ø¦Û•Ù… Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„Û• Ù¾ÛØ´ØªØ± Ù„Û• Ù‡ÛÚµÛŒ (" + line + ") ØªÛ†Ù…Ø§Ø± Ú©Ø±Ø§ÙˆÛ•!");
            }

            await db.collection("Cars").add({
                number: num,
                line: line,
                price: price,
                type: type,
                time: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            alert("âœ… Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ø®Û•Ø²Ù† Ú©Ø±Ø§");
            clearInputs();
        } catch (e) { alert("Ù‡Û•ÚµÛ• Ú•ÙˆÙˆÛŒØ¯Ø§: " + e.message); }
    }

    // Ù¢. Ú¯Û•Ú•Ø§Ù† Ø¨Û† Ø¯ÚµÙ†ÛŒØ§Ø¨ÙˆÙˆÙ†Û•ÙˆÛ• Ù„Û• Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†
    async function searchCar() {
        const num = document.getElementById('carNumber').value.trim();
        if(!num) return alert("Ø¨Û† Ú¯Û•Ú•Ø§Ù† ØªÛ•Ù†Ù‡Ø§ Ú˜Ù…Ø§Ø±Û•ÛŒ Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„ Ø¨Ù†ÙˆØ³Û•");

        try {
            const snapshot = await db.collection("Cars").where("number", "==", num).get();
            if (snapshot.empty) {
                alert("Ø¦Û•Ù… Ú˜Ù…Ø§Ø±Û•ÛŒÛ• Ù¾ÛØ´ØªØ± ØªÛ†Ù…Ø§Ø± Ù†Û•Ú©Ø±Ø§ÙˆÛ•.");
            } else {
                const data = snapshot.docs[0].data();
                document.getElementById('carLine').value = data.line;
                document.getElementById('carPrice').value = data.price;
                document.getElementById('carType').value = data.type;
                alert("Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ø¦Û•Ù… Ø¦Û†ØªÛ†Ù…Ø¨ÛÙ„Û• Ø¯Û†Ø²Ø±Ø§Ù†Û•ÙˆÛ• Ùˆ Ù¾Ú•Ú©Ø±Ø§Ù†Û•ÙˆÛ•.");
            }
        } catch (e) { alert("Ù‡Û•ÚµÛ• Ù„Û• Ú¯Û•Ú•Ø§Ù†"); }
    }

    function clearInputs() {
        document.getElementById('carNumber').value = "";
        document.getElementById('carLine').selectedIndex = 0;
        document.getElementById('carPrice').selectedIndex = 0;
        document.getElementById('carType').selectedIndex = 0;
    }
</script>

</body>
</html>
